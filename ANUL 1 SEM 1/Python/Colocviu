# Subiectul 1
# FiÈ™ierul text numere.in conÈ›ine, pe mai multe linii, numere naturale despÄƒrÈ›ite prin
# spaÈ›ii. SÄƒ se scrie Ã®n fiÈ™ierul text numere.out numerele respective grupate Ã®n funcÈ›ie de
# numÄƒrul biÈ›ilor nenuli din reprezentÄƒrile lor binare, conform modelului din exemplul de mai
# jos. Grupele de numere vor fi scrise Ã®n ordinea descrescÄƒtoare a numÄƒrului de numere pe care
# le conÈ›in, iar Ã®n caz de egalitate se vor scrie descrescÄƒtor dupÄƒ numÄƒrul de biÈ›i nenuli
# corespunzÄƒtori grupelor. Ãn cadrul fiecÄƒrei grupe numerele vor fi ordonate crescÄƒtor. Fiecare
# numÄƒr va fi scris o singurÄƒ datÄƒ Ã®n fiÈ™ierul de ieÈ™ire.

from os import execv


def  nr_biti_nenuli(n):
    count = 0
    while (n):
        count += n & 1
        n >>= 1
    return count

fisier = open('numere.in', 'r').read().split()

numere = [int(x) for x in fisier]
try:
  fisier_output = open('numere.out', 'w')
except:
  fisier_output = open('numere.out', 'x')

rez = {}
for nr in numere:
  nr_biti = nr_biti_nenuli(nr)
  try:
    rez[nr_biti].append(nr)
  except:
    rez[nr_biti] = [nr]

for item in rez:
  rez[item] = list(set(rez[item]))

for item in rez:
  rez[item].sort()

rezultat = {k: value for k, value in sorted(rez.items(), key=lambda item: (len(item[1]), item[0]),reverse=True )}

for item in rezultat:
  x = [str(n) for n in rezultat[item]]
  s = ','.join(x)
  fisier_output.write(f'{item} biti nenuli: {s}\n')
  
  
 # Subiectul 2
# Se dÄƒ fiÈ™ierul "matrice.in" cu urmÄƒtoarea structurÄƒ: pe linia ğ‘– se aflÄƒ separate prin cÃ¢te un spaÈ›iu
# ğ‘› numere naturale reprezentÃ¢nd elementele de pe linia ğ‘– a unei matrice, ca Ã®n exemplul de mai
# jos. Este cunoscut faptul cÄƒ Ã®n fiÈ™ier se aflÄƒ ğ‘› âˆ— ğ‘› elemente numere naturale, unde ğ‘› este un
# numÄƒr natural impar > 2.

# a) [0,25p] SÄƒ se scrie o funcÈ›ie citire_matrice care citeÈ™te datele din fiÈ™ierul "matrice.in" È™i
# returneazÄƒ o matrice de dimensiune ğ‘› Ã— ğ‘› formatÄƒ din aceste numere.


def citire_matrice():
    f = open("matrice.in", "r")
    matrice=f.read()
    matrice=matrice.split("\n")
    n=[]
    for elem in matrice:
        lista=[int(x) for x in elem.split()]
        n.append(lista)
    f.close()
    return n

# b)[1,5p] SÄƒ se scrie o funcÈ›ie care primeÈ™te ca parametru matricea È™i returneazÄƒ matricea bordatÄƒ
# dupÄƒ urmÄƒtoarele reguli:
# â— se va adÄƒuga o coloanÄƒ nouÄƒ la final (pe poziÈ›ia ğ‘›) care va avea pe poziÈ›ia ğ‘˜ suma
# valorilor de pe linia ğ‘˜
# â— se va adÄƒuga o linie nouÄƒ la final (poziÈ›ia ğ‘›) care va avea pe poziÈ›ia ğ‘˜ suma valorilor
# de pe coloana ğ‘˜


def matrice(matricea):
    lung=len(matricea)
    for elem in matricea:
      suma=sum(elem)
      elem.append(suma)
    a=[0 for i in range(lung+1)]
    lung=lung+1
    for i in range(lung-1):
        for j in range(lung):
          if i==0:
              a[j]=matricea[i][j]
          else:
              a[j]+=matricea[i][j]
    matricea.append(a)
    return matricea

print(matrice(citire_matrice()))

#c)[1,25p] Se considerÄƒ matricea cititÄƒ la punctul a), peste care se aplicÄƒ funcÈ›ia de la punctul b).
# SÄƒ se parcurgÄƒ matricea mai Ã®ntÃ¢i pe diagonala principalÄƒ, apoi pe diagonala secundarÄƒ È™i, Ã®n final,
# restul elementelor care nu aparÈ›in diagonalelor (parcurgerea se face pe linii de sus Ã®n jos È™i de la
# stÃ¢nga la dreapta) È™i se afiÈ™eazÄƒ elementele Ã®n fiÈ™ierul â€matrice.outâ€.

matricea=citire_matrice()
fct=matrice(matricea)
g=open("matrice.out", "w")
lung=len(matricea)
for i in range(lung):
    b=matricea[i][i]
    c=''
    while b!=0:
        nr=b%10
        numere=nr+ord('0')
        c=c+chr(numere)
        b=b//10
    g.write(c)
    g.write(" ")
for i in range(lung):
    b=matricea[i][lung-i-1]
    c=''
    while b!=0:
        nr=b%10
        numere=nr+ord('0')
        c=c+chr(numere)
        b=b//10
    g.write(c)
    g.write(" ")
for i in range(lung):
    for j in range(lung):
        if i!=j and j!=lung-i-1:
            b = matricea[i][j]
            c = ''
            while b != 0:
                nr = b % 10
                numere = nr + ord('0')
                c = c + chr(numere)
                b = b // 10
            g.write(c)
            g.write(" ")
